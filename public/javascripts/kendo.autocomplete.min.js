(function(a,b){function o(a){var b=a.value.length;j(a,b,b)}function n(a,b,c,d){var e=b.split(d);e.splice(l(a,b,d),1,c),e[e.length-1]!==""&&e.push("");return e.join(d)}function m(a,b,c){return b.split(c)[l(a,b,c)]}function l(a,b,c){return b.substring(0,a).split(c).length-1}var c=window.kendo,d=c.ui,e=c.data.DataSource,f=d.List,g="change",h="k-state-selected",i=f.caret,j=f.selectText,k=a.proxy,p=f.extend({init:function(b,c){var d=this;c=a.isArray(c)?{dataSource:c}:c,f.fn.init.call(d,b,c),d._wrapper(),d._accessors(),d.dataSource=e.create(d.options.dataSource).bind(g,k(d.refresh,d)),d.bind([g],d.options),d.element.attr("autocomplete","off").addClass("k-input").bind({keydown:k(d._keydown,d),paste:k(d._search,d),focus:function(){d.previous=d.value(),d.wrapper.addClass("k-state-focused")},blur:function(){d._bluring=setTimeout(function(){d._blur(),d.wrapper.removeClass("k-state-focused")},100)}}),d._popup()},options:{suggest:!1,minLength:1,delay:200,height:200,filter:"startswith"},close:function(){var a=this;a._current=null,a.popup.close()},refresh:function(){var b=this,d=b.ul[0],e=b.dataSource.view(),f=e.length;d.innerHTML=c.render(b.template,e),b._height(f),f&&b.options.highlightFirst&&b.current(a(d.firstChild)),b.popup[f?"open":"close"]()},select:function(b){var c=this,d=c.options.separator,e=c.dataSource.view(),g,j;b=a(b),b[0]&&!b.hasClass(h)&&(j=f.inArray(b[0],c.ul[0]),j>-1&&(e=e[j],g=c._text(e),d&&(g=n(i(c.element[0]),c.value(),g,d)),c.value(g),c.current(b.addClass(h))))},search:function(a){var b=this,a=a||b.value(),c=b.options,d=c.separator,e,f,g;b._current=null,clearTimeout(b._typing),d&&(a=m(i(b.element[0]),a,d)),e=a.length,e?e>=b.options.minLength&&b.dataSource.filter({field:c.dataTextField,operator:c.filter,value:a}):b.popup.close()},suggest:function(a){var b=this,c=b.element[0],d=b.options.separator,e=b.value(),f,g,h=i(c);typeof a!="string"&&(a=a?a.text():""),h<=0&&(h=e.toLowerCase().indexOf(a.toLowerCase())+1),a||(a=e.substring(0,h),d&&(a=a.split(d).pop())),d&&(a=n(h,e,a,d)),a!==e&&(b.value(a),f=a.length,d&&(f=h+a.substring(h).indexOf(d)),j(c,h,f))},value:function(a){var c=this,d=c.element[0];if(a!==b)d.value=a;else return d.value},_accept:function(a){var b=this;c.support.touch?setTimeout(function(){b._focus(a)},0):b._focus(a),o(b.element[0])},_move:function(a){var b=this;a=a[0]?a:null,b.current(a),b.options.suggest&&b.suggest(a)},_keydown:function(b){var d=this,e=d.ul[0],f=b.keyCode,g=c.keys,h=d._current,i=d.popup.visible();f===g.DOWN?(i&&d._move(h?h.next():a(e.firstChild)),b.preventDefault()):f===g.UP?(i&&d._move(h?h.prev():a(e.lastChild)),b.preventDefault()):f===g.ENTER||f===g.TAB?d._accept(h):f===g.ESC?d.close():d._search()},_search:function(){var a=this;clearTimeout(a._typing),a._typing=setTimeout(function(){a.previous!==a.value()&&a.search()},a.options.delay)},_wrapper:function(){var a=this,b=a.element,c=b[0],d="tabIndex",e;e=b.parent(),e.is("div.k-widget")||(e=b.wrap("<div />").parent()),e[0].style.cssText=c.style.cssText,b.css({width:"100%",height:"auto"}),a._focused=a.element,a.wrapper=e.addClass("k-widget k-autocomplete k-header").addClass(c.className)}});d.plugin("AutoComplete",p)})(jQuery)