(function(a,b){function o(b,c){return b===c||a.contains(b,c)}var c=window.kendo,d=c.ui,e=d.Component,f="id",g="li",h="change",i="character",j="k-state-focused",k="k-state-hover",l="k-loading",m="select",n=a.proxy,p=e.extend({init:function(b,c){var d=this;e.fn.init.call(d,b,c),d._template(),d.ul=a('<ul class="k-list k-reset"/>').css({overflow:"auto"}).mousedown(function(){setTimeout(function(){clearTimeout(d._bluring)},0)}).delegate(g,"click",n(d._click,d)).delegate(g,"mouseenter",function(){a(this).addClass(k)}).delegate(g,"mouseleave",function(){a(this).removeClass(k)}),d.list=a("<div class='k-list-container'/>").attr(f,d.element.attr(f)+"-list").append(d.ul),a(document.documentElement).bind("mousedown",n(d._mousedown,d))},current:function(a){var c=this;if(a!==b)c._current&&c._current.removeClass(j),a?(a.addClass(j),c._scroll(a[0])):c._selected=a,c._current=a;else return c._current},_accessors:function(){var a=this,b=a.element,d=a.options,e=c.getter,f=b.attr("data-text-field"),g=b.attr("data-value-field");f&&(d.dataTextField=f),g&&(d.dataValueField=g),a._text=e(d.dataTextField),a._value=e(d.dataValueField)},_blur:function(){var a=this;a._change(),a.close()},_change:function(){var a=this,b=a.value();b!==a.previous&&(a.trigger(h),a.element.trigger(h),a.previous=b)},_click:function(b){this._accept(a(b.currentTarget))},_focus:function(a){var b=this;b.select(a),b._blur(),b._focused[0]!==document.activeElement&&b._focused.focus()},_height:function(a){if(a){var b=this,c=b.ul,d=b.list,e=d.parent(".k-animation-container"),f=b.options.height;b.popup.visible()?(d.height(c[0].scrollHeight>f?f:"auto"),e.height(f)):(d.show().height(c[0].scrollHeight>f?f:"auto").hide(),e.show().height(f).hide())}},_popup:function(){var a=this,b=a.list,c=a.options,e=a.wrapper,f;a.popup=new d.Popup(b,{anchor:e,open:c.open,close:c.close}),f=e.outerWidth()-(b.outerWidth()-b.width()),b.css({fontFamily:e.css("font-family"),width:f})},_index:function(a){var c=this,d,e,f=c.dataSource.view(),g;for(d=0,e=f.length;d<e;d++){g=c._value(f[d]),g===b&&(g=c._text(f[d]));if(g==a)return d}return-1},_get:function(b){var c=this,d,e=c.dataSource.view(),f;if(typeof b=="function")for(d=0,f=e.length;d<f;d++)if(b(e[d])){b=d;break}d=-1;if(typeof b=="number"){if(b<0)return a();b=a(c.ul[0].childNodes[b])}b&&b.nodeType&&(b=a(b));return b},_toggleHover:function(b){c.support.touch||a(b.currentTarget).toggleClass(k,b.type==="mouseenter")},_toggle:function(a){var c=this;a=a!==b?a:!c.popup.visible(),c[a?"open":"close"]()},_scroll:function(a){if(!!a){var b=this.ul[0],c=a.offsetTop,d=a.offsetHeight,e=b.scrollTop,f=b.clientHeight,g=c+d;b.scrollTop=e>c?c:g>e+f?g-f:e}},_template:function(){var a=this,b=a.options,d=b.template,e=b.dataTextField||"";d?(d=c.template(d),a.template=function(a){return"<li class='k-item' unselectable='on'>"+d(a)+"</li>"}):a.template=c.template("<li class='k-item' unselectable='on'>${data"+(e?".":"")+e+"}</li>",{useWithBlock:!1})}});a.extend(p,{caret:function(a){var b,c=a.ownerDocument.selection;c?b=Math.abs(c.createRange().moveStart(i,-a.value.length)):b=a.selectionStart;return b},selectText:function(a,b,c){if(a.createTextRange){var d=a.createTextRange();d.collapse(!0),d.moveStart(i,b),d.moveEnd(i,c-b),d.select()}else a.setSelectionRange(b,c)},inArray:function(a,b){var c=-1;if(!a||a.parentNode!==b)return c;c=0;while(a=a.previousSibling)c++;return c}}),c.ui.List=p,d.Select=p.extend({init:function(a,b){p.fn.init.call(this,a,b)},close:function(){this.popup.close()},_hideBusy:function(){var a=this;clearTimeout(a._busy),a.arrow.removeClass(l)},_showBusy:function(){var a=this;a._busy||(a._busy=setTimeout(function(){a.arrow.addClass(l)},100))},_dataSource:function(){var b=this,d,e=b.element,f=b.options,g=f.dataSource||{};g=a.isArray(g)?{data:g}:g,b.element.is(m)&&(d=e.children(":selected"),d[0]&&(f.index=d.index()),g.select=e,g.fields=[{field:f.dataTextField},{field:f.dataValueField}]),b.dataSource=c.data.DataSource.create(g).bind(h,n(b.refresh,b)).bind("requestStart",n(b._showBusy,b))},_enable:function(){var a=this,b=a.options;a.element.prop("disabled")&&(b.enable=!1),a.enable(b.enable)},_move:function(a){var b=this,d=a.keyCode,e=c.keys,f=b.ul[0],g=b._current,h=d===e.DOWN,i;d===e.UP||h?(a.altKey?b.toggle(h):h?(b.select(g?g[0].nextSibling:f.firstChild),a.preventDefault()):(b.select(g?g[0].previousSibling:f.lastChild),a.preventDefault()),i=!0):d===e.ENTER||d===e.TAB?(b._accept(g),i=!0):d===e.ESC&&(b.close(),i=!0);return i},_options:function(a){var c=this,d=c.element,e=c.value(),f=a.length,g=[],h,i,j,k,l;for(l=0;l<f;l++)h="<option",i=a[l],j=c._text(i),k=c._value(i),k!==b&&(h+=' value="'+k+'"'),h+=">",j!==b&&(h+=j),h+="</option>",g.push(h);d.html(g.join("")),d.val(e)}})})(jQuery)