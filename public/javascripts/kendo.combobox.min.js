(function(a,b){var c=window.kendo,d=c.ui,e=d.List,f=d.Select,g="click",h="disabled",i="change",j="k-state-disabled",k="select",l="k-state-selected",m="k-state-hover",n="mouseenter mouseleave",o=".k-dropdown-wrap",p=a.proxy,q=f.extend({init:function(b,c){var d=this;c=a.isArray(c)?{dataSource:c}:c,f.fn.init.call(d,b,c),b=d.element,c=d.options,d._wrapper(),d._input(),d._popup(),d._accessors(),d._dataSource(),d._enable(),d.bind([i],c),d.input.bind({keydown:p(d._keydown,d),focus:function(){d.input.parent().addClass("k-state-focused")},blur:function(){d._bluring=setTimeout(function(){d._current||d.text(d.text()),clearTimeout(d._typing),d._blur(),d.input.parent().removeClass("k-state-focused")},100)}}),d.previous=d.value(),c.autoBind?d._select():b.is(k)&&d.input.val(b.children(":selected").text())},options:{enable:!0,index:-1,autoBind:!0,delay:200,dataTextField:"text",dataValueField:"value",minLength:1,height:200,highlightFirst:!0,filter:"none",suggest:!1},current:function(a){var b=this,c=b._current;c&&c.removeClass(l),f.fn.current.call(b,a)},enable:function(a){var b=this,c=b.element,d=b.wrapper,e=b.input,f=b.arrow.parent();a===!1?(d.addClass(j).children(o).unbind(n),e.attr(h,h),c.attr(h,h),f.unbind(g)):(d.removeClass(j).children(o).bind(n,b._toggleHover),e.removeAttr(h),c.removeAttr(h),f.bind(g,function(){b.toggle()}))},open:function(){var a=this,b=a._selected;!a.ul[0].firstChild||a._filtered&&b?(a.options.autoBind=!1,a._filtered=!1,a._select()):(a.popup.open(),b&&a._scroll(b[0]))},refresh:function(){var b=this,d=b.ul,e=b.options,f=e.suggest,g=e.height,h=b.dataSource.view(),i=h.length;d[0].innerHTML=c.render(b.template,h),b._height(i),b.element.is(k)&&b._options(h),i&&((f||e.highlightFirst)&&b.current(a(b.ul[0].firstChild)),f&&b.suggest(b._current)),e.autoBind||b.toggle(!!i),b._hideBusy()},select:function(a){var c=this,d,e,f=c._highlight(a),g=c.dataSource.view();f!==-1&&(c._selected=c._current.addClass(l),g=g[f],d=c._text(g),e=c._value(g),c.input[0].value=d,c.element[0].value=e!==b?e:d)},search:function(a){var b=this,a=a||b.text(),c=a.length,d=b.options,e=d.filter;clearTimeout(b._typing),c?c>=d.minLength&&(e==="none"?b._filter(a):(b._filtered=!0,d.autoBind=!1,b.dataSource.filter({field:d.dataTextField,operator:e,value:a}))):b.close()},suggest:function(a){var b=this,c=b.input[0],d=b.text(),f=e.caret(c);typeof a!="string"&&(a=a?a.text():""),f<=0&&(f=d.toLowerCase().indexOf(a.toLowerCase())+1),a||(a=d.substring(0,f)),a!==d&&(b.text(a),e.selectText(c,f,a.length))},text:function(a){var c=this,d=c.input[0];if(a!==b)c.select(function(b){return c._text(b)===a}),c._selected||(c._custom(a),c.element.val(a)),d.value=a;else return d.value},toggle:function(a){var b=this;clearTimeout(b._bluring),b.input[0].focus(),setTimeout(function(){b._toggle(a)},0)},value:function(a){var c=this,d,e=c.element;if(a!==b)d=c._index(a),d>-1?c.select(d):(c.current(null),c._custom(a),e.val(a),c.text(a)),c.previous=e.val();else return e.val()},_accept:function(a){var b=this,c;a?setTimeout(function(){b._focus(a)},0):(c=b.previous,b.value(b.text()),b.previous=c,b._change())},_clear:function(){var a=this;a.text()||a.current(null)},_custom:function(b){var c=this,d=c.element,e=c._option;d.is(k)&&(e||(e=c._option=a("<option/>"),d.append(e)),e.text(b))},_filter:function(a){var c=this,d=c.options,a=a.toLowerCase(),e=c.dataSource,f=function(d){var e=c._text(d);if(e!==b)return(e+"").toLowerCase().indexOf(a)===0};c.ul[0].firstChild?(c._highlight(f)!==-1&&(d.suggest&&c._current&&c.suggest(c._current),c.open()),c._hideBusy()):(d.autoBind=!0,e.bind(i,function g(){c.search(a),e.unbind(i,g)}).fetch())},_highlight:function(a){var c=this;if(a==b)return-1;c.current(null),a=c._get(a),a[0]&&!a.hasClass("k-state-focused")&&c.current(a);return e.inArray(a[0],c.ul[0])},_input:function(){var a=this,b=a.element[0],c=a.wrapper,d=".k-input",e;e=c.find(d),e[0]||(c.append('<div class="k-dropdown-wrap k-state-default"><input class="k-input" type="text" autocomplete="off"/><span class="k-select"><span class="k-icon k-arrow-down">select</span></span></div>').append(a.element),e=c.find(d)),e[0].style.cssText=b.style.cssText,e.css({width:"100%",height:"auto"}),e.addClass(b.className).show(),a._focused=a.input=e,a.arrow=c.find(".k-icon")},_keydown:function(a){var b=this;c.keys.TAB===a.keyCode?b.text(b.input.val()):b._move(a)||b._search(),setTimeout(p(b._clear,b))},_search:function(){var a=this;clearTimeout(a._typing),a._typing=setTimeout(function(){var b=a.text();a._prevText!==b&&(a._prevText=b,a.search(b))},a.options.delay)},_select:function(){var a=this,b=a.dataSource,c=function(){var d=a.value();d?a.value(d):a.select(a.options.index),a.previous=a.value(),b.unbind(i,c)};b.bind(i,c).query()},_wrapper:function(){var a=this,b=a.element,c;c=b.parent(),c.is("div.k-widget")||(c=b.hide().wrap("<div />").parent()),c[0].style.cssText=b[0].style.cssText,a.wrapper=c.addClass("k-widget k-combobox k-header").show()}});d.plugin("ComboBox",q)})(jQuery)